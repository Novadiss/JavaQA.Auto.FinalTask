# План тестирования комплексного сервиса, взаимодействующего с СУБД и API банка.

## Перечень автоматизируемых сценариев;

1. Валидное тестирование формы "Купить".
      
       Описание валидных данных:
         Номер карты - 1111 2222 3333 4444 (APPROVED карта, одобреная для тестирования).
         Месяц - 01 (Первый месяц в году).
         Год - 2024 (текущий год).
         Владелец - VASYA PUPKIN (выбрано случайно, соответствует стандарту имен указываемых на картах).
         "CSV/CVV" - 333 (выбран случайно, не является первым или последним возможным кодом).

        1. Проверка оплаты с вводом валидных данных и проверка формирования записи в таблице базы данных. 
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год", "Владелец",
          "CSV/CVV" и нажатие на кнопку "купить":
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        2. Тестирование поля ввода "Месяц" на валидные значения. 
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Год", "Владелец",
          "CSV/CVV" и тестовых в поле "Месяц" нажатие на кнопку "купить":
           Ввод последнего месяца в формате хх (12). Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком".
        3. Тестирование поля ввода "Год" на валидные значения. 
         Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Владелец",
         "CSV/CVV" и тестовых в поле "Год" нажатие на кнопку "купить":
          Ввод года "текущий + 5 лет (максимум на который выдается карта)" (29). Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком".
        4. Тестирование поля ввода "Владелец" на валидные значения.
         Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год",
         "CSV/CVV" и тестовых в поле "Владелец" нажатие на кнопку "купить":
          Ввод имени на латинице капсом (VASYA). Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком".
          Ввод имени и фамилии на латинице капсом (VASYA PUPKIN). Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком".
        5. Тестирование поля ввода "CSV/CVV" на валидные значения.
         Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год",
         "Владелец" и тестовых в поле "CSV/CVV" нажатие на кнопку "купить":
          Ввод кода в формате xxx первого (001). Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком".
          Ввод кода в формате xxx последнего (999). Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком".
        6. Тестирование карты для которой платеж не одобрен и проверка формирования записи в таблице базы данных.
          Ввод валидных данных (указаны выше) в поля "Месяц", "Год", "Владелец",
          "CSV/CVV", в поле "Номер карты" ввод "DECLINED" карты (5555 6666 7777 8888), и нажатие на кнопку "купить":
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "DECLINED".

2. Невалидное тестирование формы "Купить".

        1. Тестирование поля ввода "Месяц" на невалидные значения. 
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Год", "Владелец",
          "CSV/CVV" и тестовых в поле "Месяц" нажатие на кнопку "купить":
           Ввод месяца одной цифрой (1). Ожидание: ошибка "Неверный формат".
           Ввод невозможного месяца (13). Ожидание: ошибка "Неверно указан срок действия карты".
           ВВод нулевого значения (00). Ожидание: ошибка "Неверно указан срок действия карты".
           Ввод месяца буквами (aa). Ожидание: в форму не вводятся буквы, ошибка "Поле обязательно для заполнения".
           Ввод месяца символами (%!). Ожидание: в форму не вводятся символы, ошибка "Поле обязательно для заполнения".
        2. Тестирование поля ввода "Год" на невалидные значения. 
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Владелец",
          "CSV/CVV" и тестовых в поле "Год" нажатие на кнопку "купить":
           Ввод прошлого года (23). Ожидание: ошибка "Истек срок действия карты".
           Ввод максимально возможного года (99). Ожидание: ошибка "Неверно указан срок действия карты".
           Ввод года + 6 лет (30). Ожидание: ошибка "Неверно указан срок действия карты".        
           Ввод года буквами (aa). Ожидание: в форму не вводятся буквы, ошибка "Поле обязательно для заполнения".
           Ввод года символами (№!). Ожидание: в форму не вводятся символы, ошибка "Поле обязательно для заполнения".
        3. Тестирование поля ввода "Владелец" на невалидные значения.
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год",
          "CSV/CVV" и тестовых в поле "Владелец" нажатие на кнопку "купить":
           Ввод имени на латинице строчными (vasya). Ожидание: ошибка "Неверный формат".
           Ввод имени на кирилице (ВАСЯ). Ожидание: ошибка "Неверный формат".
           Ввод имени на цифрами (8439). Ожидание: ошибка "Неверный формат".
           Ввод имени на символами (!!;;%). Ожидание: ошибка "Неверный формат".
           Ввод имени на латинице из 3х слов (VASYA VASYA VASYA). Ожидание: ошибка "Неверный формат".
        5. Тестирование поля ввода "CSV/CVV" на невалидные значения.
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год",
          "Владелец" и тестовых в поле "CSV/CVV" нажатие на кнопку "купить":
           Ввод кода в формате xxx нулевого (000). Ожидание: ошибка "Неверный формат".
           Ввод кода в формате xx последнего (22). Ожидание: ошибка "Неверный формат".
           Ввод кода буквами (aaa). Ожидание: в форму не вводятся буквы, ошибка "Поле обязательно для заполнения".
           Ввод кода символами (%!№). Ожидание: в форму не вводятся символы, ошибка "Поле обязательно для заполнения".
        5. Тестирование поля ввода "Номер карты" на невалидные значения.
          Ввод валидных данных (указаны выше) в поля "Месяц", "Год", "Владелец",
          "CSV/CVV" и тестовых в поле "Номер карты" нажатие на кнопку "купить":
           Ввод несуществущей карты (5555 6666 7777 8823). Ожидание: "Ошибка! Банк отказал в проведении операции".
           Ввод неполного номера карты (5555 5555 5555 555). Ожидание: ошибка "Неверный формат".
           Ввод карты буквами (aaaa aaaa aaaa aaaa). Ожидание: в форму не вводятся буквы, ошибка "Поле обязательно для заполнения".
           Ввод карты символами (!!!! $$$$ %%%% ####). Ожидание: в форму не вводятся символы, ошибка "Поле обязательно для заполнения".

3. Валидное тестирование формы "Купить в кредит".

        1. Все данные и тесты идентичны валидному тестированию формы "Купить", 
         таблица базы данных для проверки формирования записи называется "credit_request_entity".

4. Невалидное тестирование формы "Купить в кредит".

        1. Все данные и тесты идентичны невалидному тестированию формы "Купить", 
         таблица базы данных для проверки формирования записи называется "credit_request_entity".

## Перечень используемых инструментов с обоснованием выбора

    1. IntelliJ IDEA упрощения взаимодействия с кодом и модулями.
    2. Модуль JUnit 5 как удобный язык для автоматизации тестирования.
    3. Модуль slf4j - библиотека для протоколирования.
    4. Модуль Selenium с расширением Selenide для взаимодействия с web-формами.
    5. Возможно пригодится postman, если будет нужно делать запросы сразу на бекэнд или БД.
    6. Модуль Lombok для сокращения размеров кода
    7. Возможно модуль faker, для генерации различных данных.
    9. Модули allure и reportportal для выгрузки логов и составления отчетов
    10. Настроенный CI (Gradle Report), для автопроверки тестов на GitHub
    11. Браузер: Хром, основной браузер в котором будет проводится проверка
    
## Перечень и описание возможных рисков при автоматизации;
    
    1. В процесе тестирования могут быть обнаружены ошибки, что потребует их оформления и это может удлинить тестирование.
    2. Тестами может быть перекрыто недостаточно сценариев, из за чего могут вылезти ошибки.
    3. При дальнейшей разработке проекта могут измениться структура приложения и БД, придётся уточнять.
    
## Интервальная оценка с учётом рисков в часах;

    1. На прогон автотестов закладываю 15 мин.
        Ожидаю выловить 5-10 багов, на оформлениеие выявленных багов и повторный прогон тестов закладываю (10*15 мин) два с половиной часа.
        Удвоим ожидаемое время тестирования с учетом форс-мажора.
        Итого интервал ожидаемых работ составит 5 часов.

## План сдачи работ: когда будут проведены автотесты, результаты их проведения и отчёт по автоматизации.

    1. Ожидаемый срок проведения автотестов, подведение результатов и формирование отчета - 12 февраля
