# План тестирования комплексного сервиса, взаимодействующего с СУБД и API банка.

## Перечень автоматизируемых сценариев;

1. Валидное тестирование формы "Купить".
      
       Описание валидных данных:
         Номер карты - 1111 2222 3333 4444 (APPROVED карта, одобреная для тестирования).
         Месяц - 03 (Следующий месяц, чтобы тесты сработали корректно).
         Год - 2025 (Следующий год, чтобы тесты сработали корректно).
         Владелец - VASYA PUPKIN (выбрано случайно, соответствует стандарту имен указываемых на картах).
         "CSV/CVV" - 333 (выбран случайно, не является первым или последним возможным кодом).

        1. Проверка оплаты с вводом валидных данных и проверка формирования записи в таблице базы данных. 
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год", "Владелец",
          "CSV/CVV" и нажатие на кнопку "купить":
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        2. Тестирование поля ввода "Месяц" на минимальные валидные значения и проверка формирования записи в таблице базы данных.  
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Год", "Владелец",
          "CSV/CVV" и тестовых в поле "Месяц" нажатие на кнопку "купить":
           Ввод первого месяца в формате хх (01).          
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        3. Тестирование поля ввода "Месяц" на максимальные валидные значения и проверка формирования записи в таблице базы данных.  
          Ввод валидных данных (указаны выше) в поля "Номер карты", "Год", "Владелец",
          "CSV/CVV" и тестовых в поле "Месяц" нажатие на кнопку "купить": 
           Ввод последнего месяца в формате хх (12).
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        4. Тестирование поля ввода "Год" на минимальные валидные значения и проверка формирования записи в таблице базы данных.  
         Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Владелец",
         "CSV/CVV" и тестовых в поле "Год" нажатие на кнопку "купить":
          Ввод текущего года (2024).
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        5. Тестирование поля ввода "Год" на максимальные валидные значения и проверка формирования записи в таблице базы данных. 
         Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Владелец",
         "CSV/CVV" и тестовых в поле "Год" нажатие на кнопку "купить":
          Ввод года "текущий + 5 лет (максимум на который выдается карта)" (29).
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        6. Тестирование поля ввода "Владелец" на валидное значение при использовании только имени и проверка формирования записи в таблице базы данных. 
         Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год",
         "CSV/CVV" и тестовых в поле "Владелец" нажатие на кнопку "купить":
          Ввод имени без фамилии на латинице капсом (VASYA).
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        7. Тестирование поля ввода "CSV/CVV" на минимальное валидные значения и проверка формирования записи в таблице базы данных. 
         Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год",
         "Владелец" и тестовых в поле "CSV/CVV" нажатие на кнопку "купить":
          Ввод кода в формате xxx первого (001).
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        8. Тестирование поля ввода "CSV/CVV" на максимальное валидные значения и проверка формирования записи в таблице базы данных. 
         Ввод валидных данных (указаны выше) в поля "Номер карты", "Месяц", "Год",
         "Владелец" и тестовых в поле "CSV/CVV" нажатие на кнопку "купить":
          Ввод кода в формате xxx последнего (999).
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "APPROVED".
        9. Тестирование карты для которой платеж не одобрен и проверка формирования записи в таблице базы данных.
          Ввод валидных данных (указаны выше) в поля "Месяц", "Год", "Владелец",
          "CSV/CVV", в поле "Номер карты" ввод "DECLINED" карты (5555 6666 7777 8888), и нажатие на кнопку "купить":
           Ожидание: покупка прошла, выведено сообщение "Операция одобрена Банком". 
           В таблице "payment_entity" последняя запись, имеет время соответствующее платежу и статус "DECLINED".

2. Невалидное тестирование формы "Купить".

         Для провдения невалидного тестирования вводятся валидные данные (указаны выше) во все поля кроме тестируемого,
         затем вводятся тестовые даныые в нужное поле и нажимается кнопка "Купить".

        1. Ввод в поле "Месяц" значений одной цифрой (1). Ожидание: ошибка "Неверный формат".
        2. Ввод в поле "Месяц" невозможного месяца (13). Ожидание: ошибка "Неверно указан срок действия карты".
        3. Ввод в поле "Месяц" нулевого значения (00). Ожидание: ошибка "Неверно указан срок действия карты".
        4. Ввод в поле "Месяц" значений буквами (aa). Ожидание: в форму не вводятся буквы, ошибка "Поле обязательно для заполнения".
        5. Ввод в поле "Месяц" значений символами (%!). Ожидание: в форму не вводятся символы, ошибка "Поле обязательно для заполнения".
        6. Ввод в поле "Год" значение прошлого года (23). Ожидание: ошибка "Истек срок действия карты".
        7. Ввод в поле "Год" значение максимально возможного года (99). Ожидание: ошибка "Неверно указан срок действия карты".
        8. Ввод в поле "Год" значение года + 6 лет (30). Ожидание: ошибка "Неверно указан срок действия карты".        
        9. Ввод в поле "Год" значение года буквами (aa). Ожидание: в форму не вводятся буквы, ошибка "Поле обязательно для заполнения".
        10. Ввод в поле "Год" значение года символами (№!). Ожидание: в форму не вводятся символы, ошибка "Поле обязательно для заполнения".
        11. Ввод в поле "Владелец" имени на латинице строчными (vasya). Ожидание: ошибка "Неверный формат".
        12. Ввод в поле "Владелец" имени на кирилице (ВАСЯ). Ожидание: ошибка "Неверный формат".
        13. Ввод в поле "Владелец" имени на цифрами (8439). Ожидание: ошибка "Неверный формат".
        14. Ввод в поле "Владелец" имени на символами (!!;;%). Ожидание: ошибка "Неверный формат".
        15. Ввод в поле "Владелец" имени на латинице из 3х слов (VASYA VASYA VASYA). Ожидание: ошибка "Неверный формат".
        16. Ввод в поде "CSV/CVV" значения кода в формате xxx нулевого (000). Ожидание: ошибка "Неверный формат".
        17. Ввод в поде "CSV/CVV" значения кода в формате xx последнего (22). Ожидание: ошибка "Неверный формат".
        18. Ввод в поде "CSV/CVV" значения кода буквами (aaa). Ожидание: в форму не вводятся буквы, ошибка "Поле обязательно для заполнения".
        19. Ввод в поде "CSV/CVV" значения кода символами (%!№). Ожидание: в форму не вводятся символы, ошибка "Поле обязательно для заполнения".
        20. Ввод в поле "Номер карты" значение несуществущей карты (5555 6666 7777 8823). Ожидание: "Ошибка! Банк отказал в проведении операции".
        21. Ввод в поле "Номер карты" значение неполного номера карты (5555 5555 5555 555). Ожидание: ошибка "Неверный формат".
        22. Ввод в поле "Номер карты" значение карты буквами (aaaa aaaa aaaa aaaa). Ожидание: в форму не вводятся буквы, ошибка "Поле обязательно для заполнения".
        23. Ввод в поле "Номер карты" значение карты символами (!!!! $$$$ %%%% ####). Ожидание: в форму не вводятся символы, ошибка "Поле обязательно для заполнения".

3. Валидное тестирование формы "Купить в кредит".

        1. Все данные и тесты идентичны валидному тестированию формы "Купить", 
         таблица базы данных для проверки формирования записи называется "credit_request_entity".

4. Невалидное тестирование формы "Купить в кредит".

        1. Все данные и тесты идентичны невалидному тестированию формы "Купить",

## Перечень используемых инструментов с обоснованием выбора

    1. IntelliJ IDEA упрощения взаимодействия с кодом и модулями.
    2. Модуль JUnit 5 как удобный язык для автоматизации тестирования.
    3. Модуль slf4j - библиотека для протоколирования.
    4. Модуль Selenium с расширением Selenide для взаимодействия с web-формами.
    5. Возможно пригодится postman, если будет нужно делать запросы сразу на бекэнд или БД.
    6. Модуль Lombok для сокращения размеров кода
    7. Возможно модуль faker, для генерации различных данных.
    9. Модули allure и reportportal для выгрузки логов и составления отчетов
    10. Настроенный CI (Gradle Report), для автопроверки тестов на GitHub
    11. Браузер: Хром, основной браузер в котором будет проводится проверка
    
## Перечень и описание возможных рисков при автоматизации;
    
    1. В процесе тестирования могут быть обнаружены ошибки, что потребует их оформления и это может удлинить тестирование.
    2. Тестами может быть перекрыто недостаточно сценариев, из за чего могут вылезти ошибки.
    3. При дальнейшей разработке проекта могут измениться структура приложения и БД, придётся уточнять.
    
## Интервальная оценка с учётом рисков в часах;

    1. На прогон автотестов закладываю 15 мин.
        Ожидаю выловить 5-10 багов, на оформлениеие выявленных багов и повторный прогон тестов закладываю (10*15 мин) два с половиной часа.
        Удвоим ожидаемое время тестирования с учетом форс-мажора.
        Итого интервал ожидаемых работ составит 5 часов.

## План сдачи работ: когда будут проведены автотесты, результаты их проведения и отчёт по автоматизации.

    1. Ожидаемый срок проведения автотестов, подведение результатов и формирование отчета - 12 февраля
